<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Startseite</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="js/cart.js" defer></script>
    <script src="js/auth.js" defer></script>
</head>

<body>
    <header>
        <div class="logo">
            <img src="images/logo.png" alt="Logo" class="logo-img">
            <h1>RepWorld</h1>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Startseite</a></li>
                <li><a href="products.html">Produkte</a></li>
                <li><a href="about.html">Über uns</a></li>
                <li><a href="contact.html">Kontakt</a></li>
                <li>
                    <a href="cart.html" id="cart-link">
                        <div class="cart-icon-container">
                            <img src="images/shopping-cart.png" alt="Warenkorb" class="cart-icon">
                            <span class="cart-count">0</span>
                        </div>
                    </a>
                </li>
                <li id="account-menu" style="display: none;">
                    <a href="#" id="account-link">Mein Konto</a>
                </li>
                <li id="login-register-menu">
                    <a href="#" id="login-register-link">Login/Registrieren</a>
                </li>
            </ul>
        </nav>
    </header>
    <main id="main-content">
        <section id="hero">
            <h2>HERZLICH WILLKOMMEN AUF REPWORLD</h2>
        </section>

        <section id="products">
            <h2>Unsere Produkte</h2>
            <div class="products">
                <div class="product">
                    <div class="product-image">
                        <img src="images/product1.jpg" alt="Produkt 1">
                    </div>
                    <div class="product-info">
                        <h2>Gucci Cap</h2>
                        <p>€24,99</p>
                        <a href="products.html" class="btn-more-info">Mehr erfahren</a>
                    </div>
                </div>
                <div class="product">
                    <div class="product-image">
                        <img src="images/product2.jpg" alt="Produkt 2">
                    </div>
                    <div class="product-info">
                        <h2>Ralph Lauren Zipper</h2>
                        <p>€44,99</p>
                        <a href="products.html" class="btn-more-info">Mehr erfahren</a>
                    </div>
                </div>
                <div class="product">
                    <div class="product-image">
                        <img src="images/product3.jpg" alt="Produkt 3">
                    </div>
                    <div class="product-info">
                        <h2>Airpods Gen2/3</h2>
                        <p>€29,99</p>
                        <a href="products.html" class="btn-more-info">Mehr erfahren</a>
                    </div>
                </div>
                <div class="product">
                    <div class="product-image">
                        <img src="images/product4.jpg" alt="Produkt 4">
                    </div>
                    <div class="product-info">
                        <h2>Rolex</h2>
                        <p>€49.99</p>
                        <a href="products.html" class="btn-more-info">Mehr erfahren</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="shipping-payment">
            <h2>Versand- und Zahlungsarten</h2>
            <div class="info-container">
                <div class="info-box">
                    <h3>Versandarten</h3>
                    <p>Wir bieten verschiedene Versandarten an, um sicherzustellen, dass Ihre Bestellung sicher und pünktlich bei Ihnen ankommt. Wählen Sie die für Sie passende Versandoption während des Bestellvorgangs aus.</p>
                </div>
                <div class="info-box">
                    <h3>Zahlungsarten</h3>
                    <p>Wir akzeptieren eine Vielzahl von Zahlungsmethoden, darunter Kreditkarten, PayPal und Banküberweisungen. Wählen Sie die für Sie bequemste Zahlungsmethode während des Bestellvorgangs aus.</p>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Unser Unternehmen. Alle Rechte vorbehalten.</p>
    </footer>

    <!-- Login/Registrieren Panel -->
    <div id="login-register-panel" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="tabs">
                <button class="tab-link active" onclick="openTab(event, 'login')">Login</button>
                <button class="tab-link" onclick="openTab(event, 'register')">Registrieren</button>
            </div>
            <div id="login" class="tab-content">
                <h2>Login</h2>
                <form id="login-form">
                    <label for="login-email">E-Mail:</label>
                    <input type="email" id="login-email" required>
                    <label for="login-password">Passwort:</label>
                    <input type="password" id="login-password" required>
                    <button type="submit">Login</button>
                </form>
            </div>
            <div id="register" class="tab-content" style="display:none;">
                <h2>Registrieren</h2>
                <form id="register-form">
                    <label for="register-email">E-Mail:</label>
                    <input type="email" id="register-email" required>
                    <label for="register-password">Passwort:</label>
                    <input type="password" id="register-password" required>
                    <button type="submit">Registrieren</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Mein Konto Dropdown -->
    <div id="account-dropdown" class="modal">
        <div class="modal-content">
            <span class="close-account">&times;</span>
            <ul>
                <li><a href="#" id="account-info-link">Kontoinfo</a></li>
                <li><a href="#" id="orders-link">Meine Bestellungen</a></li>
                <li><a href="#" id="settings-link">Einstellungen</a></li>
                <li><a href="#" id="logout-link">Logout</a></li>
            </ul>
        </div>
    </div>

    <!-- Kontoinfo Panel -->
    <div id="account-info-panel" class="modal">
        <div class="modal-content">
            <span class="close-account-info">&times;</span>
            <h2>Kontoinformationen</h2>
            <p id="account-email"></p>
            <p id="account-password">
                Passwort: <span id="password-hidden">********</span>
                <button id="toggle-password">Anzeigen</button>
            </p>
            <form id="change-password-form">
                <label for="new-password">Neues Passwort:</label>
                <input type="password" id="new-password" required>
                <button type="submit">Passwort ändern</button>
            </form>
        </div>
    </div>

    <!-- Bestellungen Panel -->
    <div id="orders-panel" class="modal">
        <div class="modal-content">
            <span class="close-orders">&times;</span>
            <h2>Meine Bestellungen</h2>
            <table id="orders-table">
                <thead>
                    <tr>
                        <th>Produktname</th>
                        <th>Produktnummer</th>
                        <th>Preis</th>
                        <th>Menge</th>
                        <th>Gesamtpreis</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Bestellungen werden hier dynamisch eingefügt -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Einstellungen Panel -->
    <div id="settings-panel" class="modal">
        <div class="modal-content">
            <span class="close-settings">&times;</span>
            <h2>Einstellungen</h2>
            <form id="settings-form">
                <label for="language">Sprache:</label>
                <select id="language" required>
                    <option value="de">Deutsch</option>
                    <option value="en">Englisch</option>
                </select>
                <label for="theme">Theme:</label>
                <select id="theme" required>
                    <option value="light">Hell</option>
                    <option value="dark">Dunkel</option>
                </select>
                <label for="notifications">Benachrichtigungen:</label>
                <input type="checkbox" id="notifications">
                <button type="submit">Speichern</button>
            </form>
        </div>
    </div>

    <script>
        // Toggle login/register panel
        document.getElementById('login-register-link').addEventListener('click', function(event) {
            event.preventDefault();
            document.getElementById('login-register-panel').style.display = 'block';
        });

        // Close modal
        document.querySelector('.close').addEventListener('click', function() {
            document.getElementById('login-register-panel').style.display = 'none';
        });

        // Close account modal
        document.querySelector('.close-account').addEventListener('click', function() {
            document.getElementById('account-dropdown').style.display = 'none';
        });

        // Close account info modal
        document.querySelector('.close-account-info').addEventListener('click', function() {
            document.getElementById('account-info-panel').style.display = 'none';
        });

        // Close orders modal
        document.querySelector('.close-orders').addEventListener('click', function() {
            document.getElementById('orders-panel').style.display = 'none';
        });

        // Close settings modal
        document.querySelector('.close-settings').addEventListener('click', function() {
            document.getElementById('settings-panel').style.display = 'none';
        });

        // Switch between login and register tabs
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName('tab-content');
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = 'none';
            }
            tablinks = document.getElementsByClassName('tab-link');
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(' active', '');
            }
            document.getElementById(tabName).style.display = 'block';
            evt.currentTarget.className += ' active';
        }

        // Handle registration
        document.getElementById('register-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;

            const users = JSON.parse(localStorage.getItem('users')) || [];
            const userExists = users.some(user => user.email === email);

            if (userExists) {
                alert('Benutzer existiert bereits');
            } else {
                const user = { email, password };
                users.push(user);
                localStorage.setItem('users', JSON.stringify(users));
                alert('Registrierung erfolgreich');
                document.getElementById('login-register-panel').style.display = 'none';
            }
        });

        // Handle login
        document.getElementById('login-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(user => user.email === email && user.password === password);

            if (user) {
                alert('Erfolgreich eingeloggt');
                document.getElementById('login-register-panel').style.display = 'none';
                document.getElementById('login-register-menu').style.display = 'none';
                document.getElementById('account-menu').style.display = 'block';
                localStorage.setItem('user', JSON.stringify(user)); // Save logged in user
            } else {
                alert('Ungültige Anmeldedaten');
            }
        });

        // Handle logout
        document.getElementById('logout-link').addEventListener('click', function(event) {
            event.preventDefault();
            localStorage.removeItem('user');
            document.getElementById('account-menu').style.display = 'none';
            document.getElementById('login-register-menu').style.display = 'block';
            document.getElementById('account-dropdown').style.display = 'none';
            alert('Erfolgreich ausgeloggt');
        });

        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            const loggedInUser = JSON.parse(localStorage.getItem('user'));
            if (loggedInUser) {
                document.getElementById('login-register-menu').style.display = 'none';
                document.getElementById('account-menu').style.display = 'block';
            }
        });

        // Show account dropdown
        document.getElementById('account-link').addEventListener('click', function(event) {
            event.preventDefault();
            document.getElementById('account-dropdown').style.display = 'block';
        });

        // Show account info
        document.getElementById('account-info-link').addEventListener('click', function(event) {
            event.preventDefault();
            const loggedInUser = JSON.parse(localStorage.getItem('user'));
            document.getElementById('account-email').textContent = `E-Mail: ${loggedInUser.email}`;
            document.getElementById('account-info-panel').style.display = 'block';
            document.getElementById('account-dropdown').style.display = 'none';
        });

        // Show orders
        document.getElementById('orders-link').addEventListener('click', function(event) {
            event.preventDefault();
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const ordersTableBody = document.getElementById('orders-table').querySelector('tbody');
            ordersTableBody.innerHTML = ''; // Clear existing rows

            orders.forEach(order => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${order.productName}</td>
                    <td>${order.productNumber}</td>
                    <td>${order.price}</td>
                    <td>${order.quantity}</td>
                    <td>${order.totalPrice}</td>
                `;
                ordersTableBody.appendChild(row);
            });

            document.getElementById('orders-panel').style.display = 'block';
            document.getElementById('account-dropdown').style.display = 'none';
        });

        // Show settings
        document.getElementById('settings-link').addEventListener('click', function(event) {
            event.preventDefault();
            document.getElementById('settings-panel').style.display = 'block';
            document.getElementById('account-dropdown').style.display = 'none';
        });

        // Toggle password visibility
        document.getElementById('toggle-password').addEventListener('click', function() {
            const passwordHidden = document.getElementById('password-hidden');
            if (passwordHidden.textContent === '********') {
                const loggedInUser = JSON.parse(localStorage.getItem('user'));
                passwordHidden.textContent = loggedInUser.password;
                this.textContent = 'Verbergen';
            } else {
                passwordHidden.textContent = '********';
                this.textContent = 'Anzeigen';
            }
        });

        // Handle password change
        document.getElementById('change-password-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const newPassword = document.getElementById('new-password').value;
            const loggedInUser = JSON.parse(localStorage.getItem('user'));
            const users = JSON.parse(localStorage.getItem('users')) || [];

            const userIndex = users.findIndex(user => user.email === loggedInUser.email);
            if (userIndex !== -1) {
                users[userIndex].password = newPassword;
                localStorage.setItem('users', JSON.stringify(users));
                loggedInUser.password = newPassword;
                localStorage.setItem('user', JSON.stringify(loggedInUser));
                alert('Passwort erfolgreich geändert');
                document.getElementById('account-info-panel').style.display = 'none';
            }
        });

        // Handle settings change
        document.getElementById('settings-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const language = document.getElementById('language').value;
            const theme = document.getElementById('theme').value;
            const notifications = document.getElementById('notifications').checked;

            const settings = { language, theme, notifications };
            localStorage.setItem('settings', JSON.stringify(settings));
            alert('Einstellungen erfolgreich gespeichert');
            document.getElementById('settings-panel').style.display = 'none';
        });
    </script>
</body>
</html>